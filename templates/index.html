<html> 
    <head> 
      <title>Video Streaming </title> 
    </head> 
    <body> 
      <h1> Live Video Streaming </h1> 
      <img src="stream.mjpg"> 
      <button onclick="toggleDarkMode()">Dark Mode</button>
      <button onclick="takePicture()">Photo</button>
      <button onclick="setGain('up')">Gain Up</button>
      <label id="gain">0</label>
      <button onclick="setGain('down')">Gain Down</button>
      <button onclick="setDim('up')">Dim Up</button>
      <label id="dim">0</label>
      <button onclick="setDim('down')">Dim Down</button>

      <!-- <audio controls>
          <source src="audio" type="audio/x-wav;codec=pcm">
          Your browser does not support the audio element.
      </audio> -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
      <script lang="javascript">
          function takePicture(){
            axios.get('/photo')
              .then(function (response) {
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }
          function toggleDarkMode(){  
            axios.post('/dark', {gain: ''})
              .then(function (response) {
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }
          function setDim(){
            //alert( document.getElementById("dim").value);
            axios.post('/dim', {direction: document.getElementById("dim").value})
              .then(function (response) {
                document.getElementById("dim").innerHTML = response.data.currentDim;
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }
          function getDim(){
            //alert( document.getElementById("dim").value);
            axios.get('/dim')
              .then(function (response) {
                document.getElementById("dim").innerHTML = response.data.currentDim;
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }
          function getGain(){
            //alert( document.getElementById("gain").value);
            axios.get('/gain')
              .then(function (response) {
                document.getElementById("gain").innerHTML = response.data.currentGain;
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }
          function setGain(direction){
            //alert( document.getElementById("gain").value);
            axios.post('/gain', {direction: direction})
              .then(function (response) {
                document.getElementById("gain").innerHTML = response.data.currentGain;
                console.log(response);
              })
            .catch(function (error) {
              console.log(error);
            });
          }

          (() => {
            getGain();
            getDim();
          })()
        </script>
    </body> 
   </html> 
